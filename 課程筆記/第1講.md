###### tags: `黃能富計算機網路`
#  第1講
## 1.網址
![image](https://github.com/ShangZheTsai/NTHU-ocw-computer-network/assets/107501046/0da3912c-5fd6-42e3-a273-7fc44573c73e)
---
![](https://_uploads/ByGhfEQEh.png)


# URL
就是網址(domain name)
任何應用給別人使用是透過瀏覽器的方式就必須要有URL

# HTTP
URL base on HTTP
專門為瀏覽器設計的protocal

# TCP
HTTP 又base on TCP
提供建立連線
用TCP建立連線，是可靠的，封包可能遺失或丟棄，TCP會想辦法，使再傳一次，務必會讓封包傳過去

# 如果要上一個網站，會出現17個封包
1.6個封包透過URL網址查這個domain name的IP是甚麼，因為TCP要有IP

2.用TCP用3個封包來回建立連線

3.用HTTP要求要在這個網站拿甚麼

4.離開時要把這個TCP的連線取消

## 2.網路連接
![](https://hackmd.io/_uploads/S19nmEXEh.png)

![](https://hackmd.io/_uploads/rJFP4V7Vh.png)

# link
設備間連接的方式

# Node
就是設備，switch,router也是

# point to point
如果link連接的對象只有兩個，就是point to point

# multiple access
多設備連接
每個設備都聽得到傳輸的東西，多設備可access

# switched network
用switch把很多設備連起來的區域網路

# message,packet
原始的資料叫做message，因為太大太長，所以要切成packet(封包)為單位來傳輸

# store and forward
先把封包儲存，查表(在router或switch)看這個封包要給誰，再傳輸

---
![](https://hackmd.io/_uploads/HkrxPEQNn.png)

# Hosts
電腦(主機)
# Switches
讓封包在各主機傳輸的交換器
# Spanning tree
在傳輸的時候會建構spanning tree(途中的紅線，唯一的路徑)，使不產生迴路發生錯誤或延遲
# Internetwork
把很多網路再連接起來(圖下)
(a)是一個區域網路
(b)就是把很多網路都連起來
# Router/gateway
把網路連起來的設備為router
# Host-to-host connectivity
![](https://hackmd.io/_uploads/SJ51hV743.png)
兩台主機通訊
網路的最邊邊(主機)連接，把兩個非常遠的host連接起來就叫做host to host
# Address
每個電腦或網卡都有一個address
電腦主機位置叫做IP
網卡主機叫做mac address
# Routing
找到一個路徑把封包傳給對方
![](https://hackmd.io/_uploads/BJ0i3Em4h.png)
像這個可能有兩條路徑，要走哪一條
找一個最好的路徑，叫routing
# Unicast/broadcast/multicast
Unicast:封包只給一個對象
multicast:封包給一群對象
broadcast:封包給所有人，通常只在區域網路，因為router會把broadcase擋住，否則很容易就把所有網路癱瘓
# Local Area Networks
區域網路
短距離區域性的連接網路
# Metropolitan Area Networks
一個大到都市範圍的網路
# Wide Area Networks
涵蓋範圍更大的網路

## 3.封包怎麼在網路傳輸
![](https://hackmd.io/_uploads/BkkqCVmNh.png)
封包會走哪一條路是不一定的，因為會因壅塞使有效率，或link斷掉繞不同的路

router平時就會溝通，說哪些雍塞等等，會根據當時狀況讓封包走不同的路

router也可把大封包拆成小封包傳輸，因為任何網路都有封包最大值，不同網路不一樣，切成小封包才能進去 比較小的封包最大值的網路傳輸

封包可能會因為壅塞所以在裡面繞來繞去，router就會把封包丟掉
internet是盡可能傳送封包，但可能會掉，太多封包在裡面等待傳輸，傳不出去也可能丟掉
如果很重要，就用TCP

# 4 網路上資源如何共享
![](https://hackmd.io/_uploads/B1EAhB7N2.png)
只有一個link，中間的link如何分配讓3個封包傳輸呢

![](https://hackmd.io/_uploads/ByJ1armN3.png)
Frequency Division Multiplexing(FDM):
假設把頻寬切成4等份，4個user都可傳輸，但速度慢四倍

Synchronous Time-division Multiplexing (TDM):
輪流讓每個user傳輸，每次就是每個user占用整個頻寬

>這兩個都會造成負載不平衡時，不可以互相借用造成效率不均的問題，解決方式在下面

![](https://hackmd.io/_uploads/rkY0JUX42.png)
用排程來解決
但是當壅塞的時候，還是會將封包丟棄

# 5
![](https://hackmd.io/_uploads/SJSSfImVn.png)
![](https://hackmd.io/_uploads/ByW8GIXVh.png)

# 6
![](https://hackmd.io/_uploads/H1AfGq4Nh.png)
![](https://hackmd.io/_uploads/rkXZX5ENn.png)
>網路分層簡單的架構
>先硬體就是要通訊的主要部分
>再來就是主機要互相連接
>再來是上面的process的連接通道
>之後就是應用程式

![](https://hackmd.io/_uploads/Byug89EVh.png)

這地方講得很好，可以重看
>因為網路是把主機和設備溝通，各設備要怎麼看得懂對方封包，所以要制定那個封包的格式，還有傳送的流程和操作，就是一種雙方通訊的協議，沒有協議可能就會看不懂封包或解讀錯誤。

>protocal有分同主機不同層的溝通(前面說的分層溝通，每層是用下一層提供的服務，加一些東西給上層)，也有分不同主機的溝通(peer to peer,點對點)
>IP,TCP都是protocal，TCP根據IP

>在這個Layer的結構下，每一個protocal都是透過下層的服務經過加值提供給上層
>例:TCP提供可靠傳輸服務，Base on IP傳輸，IP不可靠，TCP是在不可靠的環境下提供可靠的服務

**互聯網工程任務組
(IETF: Internet Engineering Task Force) 
負責定義互聯網標準與協議規格**

![](https://hackmd.io/_uploads/SylBp9EVh.png)
>TCP透過IP建立連線，FTP(檔案傳輸)需要可靠的連線，所以使用TCP
>根據不同需求用不同protocal

![](https://hackmd.io/_uploads/rJ60p94V2.png)
>兩台主機檔案傳輸建立的協議
>只要進到internet就是不可靠，封包可能會掉，TCP解決這樣的問題，下面網路怎麼搞亂掉，TCP都會負責


# 7

![](https://hackmd.io/_uploads/SkhzeiEE2.png)
>這個圖為左邊主機的應用程式要傳送Data到右邊主機的應用程式
>因為前面說的protocal的layer不只左右peer to peer也有同主機上下的layer

>所以流程為傳到TCP時，為了讓之後船過去到TCP階段時對方能夠解讀，要在data前面加header，之後對方TCP才能夠解讀，之後的IP也是，這個左邊加header的方式稱為encapsulation

>之後到對面header一層一層解讀
例:IP解讀header是誰送的等等，IP的header拿掉，TCP解讀header的連線過程，這個連線是建連線的封包?還是甚麼截除連線的封包? 
這個反過來拆的過程稱為decapsulation

# 8
所謂的OSI，是由國際化標準組織（ISO）針對開放式網路架構所制定的電腦互連標準，全名是開放式通訊系統互連參考模型（Open System Interconnection Reference Model），簡稱OSI模型。
![](https://hackmd.io/_uploads/By3oijN43.png)

## data link
談的是送給下一個設備

## Network
談的是送的一整段網路給最遠的目的地，怎麼送，要走甚麼路線

## Transport
使用不同應用程式有不同的需求，可能需要非常可靠或不用很可靠(video)，這些負責把資料送給對方的傳輸服務
也就是TCP或UDP...
>兩端的host才有這段(看圖)

# 9
主機或電腦怎麼跟router連接
![](https://hackmd.io/_uploads/rJCJC6FNh.png)
Network是看IP位址
Data Link是看網卡位址
>如果該設備送的時候是看IP位址，稱這設備為Layer2的設備(OSI從下往上第2)
>如果該設備送的時候是看網卡位址，稱這設備為Layer3的設備
>有能力處理到哪一層就是Layer多少的設備(有可能可有Data Link和Network的能力此為Layer3)

Switch應該是之前玩電腦插網路線那台
中間通常會連接switch(區域網路)，其中的Data Link的header是看網卡的位置，在圖中最後的physical header會有此主機的網卡位址加上要傳送到的switch的網卡位址(才知道要傳到哪)，其中也包含最終目的地位址，之後switch收到會透過這個位址進行轉送
>注意，此講的是主機連有線網路的方式，是用乙太網路


>如果主機連無線網路是連AP，如下
>![](https://hackmd.io/_uploads/BkDWKRFE3.png)
>但再連出去也是可以用有線網路的
>主機在區域網路連有線網路出去是乙太網路
>連無線網路出去叫做wifi

# 11
OSI各層的詳述
